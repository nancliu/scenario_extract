# OD数据分析 - 快速开始指南

## 🚀 5分钟快速开始

### 1. 环境准备

```bash
# 安装Python依赖
pip install -r requirements.txt
```

### 2. 配置数据库

```bash
# 方法1: 复制配置文件并修改
cp config_example.py config.py
# 然后编辑 config.py 中的数据库配置

# 方法2: 使用环境变量（推荐）
export DB_HOST=your_database_host
export DB_PORT=5432
export DB_NAME=your_database_name
export DB_USER=your_username
export DB_PASSWORD=your_password
```

### 3. 运行分析

```bash
# 快速测试（限制10000条记录）
python run_od_analysis.py --quick

# 分析最近7天数据
python run_od_analysis.py

# 分析指定日期范围
python run_od_analysis.py --start-date 2024-01-01 --end-date 2024-01-08

# 检查配置
python run_od_analysis.py --config-check
```

### 4. 查看结果

分析完成后，在 `od_analysis_output` 目录中查看：
- `od_analysis_report.html` - 分析报告
- `charts/` - 可视化图表
- `detailed_stats.json` - 详细统计数据

## 📋 命令行参数

| 参数 | 说明 | 示例 |
|------|------|------|
| `--start-date` | 开始日期 | `--start-date 2024-01-01` |
| `--end-date` | 结束日期 | `--end-date 2024-01-08` |
| `--limit` | 限制记录数 | `--limit 50000` |
| `--output-dir` | 输出目录 | `--output-dir my_analysis` |
| `--quick` | 快速模式 | `--quick` |
| `--config-check` | 检查配置 | `--config-check` |

## 🔧 常见问题

### Q: 数据库连接失败
**A:** 检查以下项目：
1. 数据库服务是否启动
2. 网络连接是否正常
3. 用户名密码是否正确
4. 数据库名称是否存在

### Q: 内存不足
**A:** 使用以下方法：
```bash
# 限制数据量
python run_od_analysis.py --limit 10000

# 或使用快速模式
python run_od_analysis.py --quick
```

### Q: 缺少数据表
**A:** 确认数据库中存在以下表：
- `dwd.dwd_od_weekly`
- `dwd.dwd_flow_gantry_weekly`
- `dwd.dwd_flow_onramp_weekly`
- `dwd.dwd_flow_offramp_weekly`

### Q: 图表显示乱码
**A:** 安装中文字体：
```bash
# Ubuntu/Debian
sudo apt-get install fonts-wqy-zenhei

# CentOS/RHEL
sudo yum install wqy-zenhei-fonts
```

## 📊 输出说明

### 分析报告内容
1. **数据概览** - 总记录数、OD对数量等基本信息
2. **车辆类型分布** - 各车型的数量和占比
3. **数据异常检测** - 空值、重复、时间异常等
4. **TOP OD对** - 流量最高的OD对列表
5. **数据质量评估** - 综合质量评分和改进建议

### 可视化图表
- `od_basic_distribution.png` - 基本分布图（车型、时间等）
- `top_od_pairs.png` - TOP 20 OD对流量图
- `station_flow_distribution.png` - 收费站流量分布图

## 🎯 下一步

完成基础数据分析后，可以进行：

1. **OD重要性分级** - 基于分析结果进行OD对重要性分级
2. **异常数据处理** - 清理和修复检测到的异常数据
3. **深度分析** - 针对特定OD对或时间段进行深入分析
4. **算法优化** - 根据数据特征优化后续算法参数

## 📞 技术支持

如遇问题，请：
1. 查看日志文件 `od_analysis.log`
2. 检查配置文件 `config.py`
3. 参考详细文档 `README_OD分析.md`
4. 联系技术团队

---

**祝您分析愉快！** 🎉
