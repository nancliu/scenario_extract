# é«˜é€Ÿå…¬è·¯ODä¸Žæµé‡å…³è”åˆ†æžæ€»ç»“æŠ¥å‘Š

## ðŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
æœ¬é¡¹ç›®æ—¨åœ¨æ·±å…¥åˆ†æžé«˜é€Ÿå…¬è·¯ODï¼ˆOrigin-Destinationï¼‰æ•°æ®ä¸Žæµé‡æ•°æ®ä¹‹é—´çš„å…³è”æ€§ï¼Œé‡ç‚¹è§£å†³é—¨æž¶é€”ä¸­æµé‡å’Œæ”¶è´¹å¹¿åœºè¿›å‡ºæµé‡çš„å‡†ç¡®å¯¹æ¯”åˆ†æžé—®é¢˜ã€‚

### åˆ†æžç›®æ ‡
1. éªŒè¯é—¨æž¶ä¸»è¦æ‰¿æ‹…é€šé“åŠŸèƒ½çš„ç†è®ºå‡è®¾
2. éªŒè¯æ”¶è´¹å¹¿åœºæµé‡ä¸ŽODæ•°æ®é«˜åº¦ä¸€è‡´çš„ç†è®ºå‡è®¾
3. åˆ†æžOD/æµé‡æ¯”ä¸­ä½æ•°çº¦50%çš„å·®å¼‚åŽŸå› 
4. å»ºç«‹ç§‘å­¦çš„äº¤é€šæ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»

### ç‰ˆæœ¬æ›´æ–°è¯´æ˜Ž
- **v2.0**ï¼šæ”¯æŒ2024å¹´å’Œ2025å¹´æ•°æ®è‡ªåŠ¨åˆ‡æ¢
- **v2.0**ï¼šä¿®å¤æ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžæ•°æ®ä¸ä¸€è‡´é—®é¢˜
- **v2.0**ï¼šä¼˜åŒ–æ•°æ®è´¨é‡è¯„ä¼°æœºåˆ¶
- **v2.0**ï¼šç§»é™¤æ— æ„ä¹‰çš„å¹³å‡è¿›å‡ºæµé‡æ¯”è®¡ç®—

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### æ•°æ®æºé€‚é…
ç³»ç»ŸçŽ°å·²æ”¯æŒè·¨å¹´ä»½æ•°æ®åˆ†æžï¼š

#### 2025å¹´æ•°æ®è¡¨
- **ODæ•°æ®**ï¼š`dwd.dwd_od_weekly`
- **é—¨æž¶æµé‡**ï¼š`dwd.dwd_flow_gantry_weekly`
- **æ”¶è´¹å¹¿åœºå…¥å£æµé‡**ï¼š`dwd.dwd_flow_onramp_weekly`
- **æ”¶è´¹å¹¿åœºå‡ºå£æµé‡**ï¼š`dwd.dwd_flow_offramp_weekly`

#### 2024å¹´æ•°æ®è¡¨
- **ODæ•°æ®**ï¼š`dwd.dwd_od_g4202`
- **é—¨æž¶æµé‡**ï¼š`dwd.dwd_flow_gantry`
- **æ”¶è´¹å¹¿åœºå…¥å£æµé‡**ï¼š`dwd.dwd_flow_onramp`
- **æ”¶è´¹å¹¿åœºå‡ºå£æµé‡**ï¼š`dwd.dwd_flow_offramp`

### å…³é”®æŠ€æœ¯æ”¹è¿›

#### 1. å¹´ä»½è‡ªåŠ¨æ£€æµ‹
```python
def _is_2024_data(self, start_date: str) -> bool:
    """è‡ªåŠ¨æ£€æµ‹æ•°æ®å¹´ä»½ï¼Œé€‰æ‹©å¯¹åº”è¡¨ç»“æž„"""
    return datetime.strptime(start_date, '%Y-%m-%d %H:%M:%S').year == 2024
```

#### 2. å­—æ®µé€‚é…æœºåˆ¶
```python
# 2024å¹´è¡¨éœ€è¦è®¡ç®—æ€»æµé‡å’Œè½¦åž‹åˆ†ç»„
if self._is_2024_data(start_date):
    # é—¨æž¶è¡¨ï¼šgantry_id -> station_code
    # è®¡ç®—æ€»æµé‡ï¼š(k1+k2+k3+k4+h1+h2+h3+h4+h5+h6+t1+t2+t3+t4+t5+t6)
    # è®¡ç®—è½¦åž‹ï¼štotal_k, total_h, total_t
else:
    # 2025å¹´è¡¨ç›´æŽ¥ä½¿ç”¨é¢„è®¡ç®—å­—æ®µ
```

#### 3. æ•°æ®æ—¶é—´è¿‡æ»¤ä¼˜åŒ–
- **æ”¶è´¹å¹¿åœºå…¥å£åˆ†æž**ï¼šåŸºäºŽ `start_time` è¿‡æ»¤ï¼Œåˆ†æžåœ¨æŒ‡å®šæ—¶é—´å¼€å§‹çš„è¡Œç¨‹
- **æ”¶è´¹å¹¿åœºå‡ºå£åˆ†æž**ï¼šåŸºäºŽ `end_time` è¿‡æ»¤ï¼Œåˆ†æžåœ¨æŒ‡å®šæ—¶é—´ç»“æŸçš„è¡Œç¨‹
- **æ•°æ®åˆå¹¶åŽ»é‡**ï¼šä½¿ç”¨ `pass_id` ç¡®ä¿æ•°æ®å®Œæ•´æ€§

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
1. **é—¨æž¶å…³è”åˆ†æž**
   - é—¨æž¶èµ·ç‚¹åˆ†æžï¼šç»Ÿè®¡ä»¥é—¨æž¶ä¸ºèµ·ç‚¹çš„ODæ•°æ®ä¸Žé—¨æž¶æµé‡çš„å…³è”
   - é—¨æž¶ç»ˆç‚¹åˆ†æžï¼šç»Ÿè®¡ä»¥é—¨æž¶ä¸ºç»ˆç‚¹çš„ODæ•°æ®ä¸Žé—¨æž¶æµé‡çš„å…³è”
   - é—¨æž¶é€”ä¸­æµé‡åˆ†æžï¼šè®¡ç®—é—¨æž¶çš„é€”ä¸­æµé‡å æ¯”å’ŒåŠŸèƒ½åˆ†ç±»

2. **æ”¶è´¹å¹¿åœºå…³è”åˆ†æž**
   - æ”¶è´¹å¹¿åœºå…¥å£åˆ†æžï¼šç»Ÿè®¡ä»¥æ”¶è´¹å¹¿åœºä¸ºèµ·ç‚¹çš„ODæ•°æ®ä¸Žå…¥å£æµé‡çš„å…³è”
   - æ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžï¼šç»Ÿè®¡ä»¥æ”¶è´¹å¹¿åœºä¸ºç»ˆç‚¹çš„ODæ•°æ®ä¸Žå‡ºå£æµé‡çš„å…³è”
   - æ”¶è´¹å¹¿åœºæµé‡å¹³è¡¡åˆ†æžï¼šåˆ†æžè¿›å‡ºæµé‡çš„å¹³è¡¡æƒ…å†µ

3. **æ·±åº¦æ¡ˆä¾‹åˆ†æž**
   - ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æžï¼šæ·±å…¥åˆ†æžOD/æµé‡æ¯”ä¸­ä½æ•°é™„è¿‘çš„å…·ä½“æ¡ˆä¾‹
   - è½¦åž‹ç»“æž„å¯¹æ¯”ï¼šå¯¹æ¯”ODæ•°æ®ä¸Žæµé‡æ•°æ®çš„è½¦åž‹åˆ†å¸ƒå·®å¼‚
   - å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼šè¯†åˆ«æµé‡å¹³è¡¡å¼‚å¸¸çš„æ”¶è´¹å¹¿åœº

### å…³é”®ç®—æ³•
```python
# é—¨æž¶é€”ä¸­æµé‡è®¡ç®—
é€”ä¸­æµé‡ = é—¨æž¶æ€»æµé‡ - (é—¨æž¶ä¸ºOç‚¹çš„ODé‡ + é—¨æž¶ä¸ºDç‚¹çš„ODé‡)
é€”ä¸­æµé‡å æ¯” = é€”ä¸­æµé‡ / é—¨æž¶æ€»æµé‡

# æ”¶è´¹å¹¿åœºä¸€è‡´æ€§è¯„ä¼°
å…¥å£ä¸€è‡´æ€§æ¯”å€¼ = æ”¶è´¹å¹¿åœºå…¥å£æµé‡ / æ”¶è´¹å¹¿åœºä¸ºOç‚¹çš„ODé‡
å‡ºå£ä¸€è‡´æ€§æ¯”å€¼ = æ”¶è´¹å¹¿åœºå‡ºå£æµé‡ / æ”¶è´¹å¹¿åœºä¸ºDç‚¹çš„ODé‡

# é—¨æž¶åŠŸèƒ½åˆ†ç±»
if ODå æ¯” > 0.5: åŠŸèƒ½ç±»åž‹ = "èµ·æ­¢åž‹"
elif é€”ä¸­æµé‡å æ¯” > 0.8: åŠŸèƒ½ç±»åž‹ = "é€šé“åž‹"  
else: åŠŸèƒ½ç±»åž‹ = "æ··åˆåž‹"
```

## ðŸ“Š åˆ†æžç»“æžœ

### æ•°æ®è§„æ¨¡ï¼ˆ1å°æ—¶æ ·æœ¬ï¼š2025-07-07 08:00-09:00ï¼‰
- **å…¥å£åˆ†æžODæ•°æ®**ï¼š100,240æ¡è®°å½•
- **å‡ºå£åˆ†æžODæ•°æ®**ï¼š105,513æ¡è®°å½•
- **åˆå¹¶åŽODæ•°æ®**ï¼šçº¦18ä¸‡æ¡è®°å½•ï¼ˆåŽ»é‡åŽï¼‰
- **é—¨æž¶æµé‡æ•°æ®**ï¼š2,690æ¡è®°å½•
- **æ”¶è´¹å¹¿åœºå…¥å£æµé‡**ï¼š1,632æ¡è®°å½•
- **æ”¶è´¹å¹¿åœºå‡ºå£æµé‡**ï¼š1,614æ¡è®°å½•

### æ ¸å¿ƒå‘çŽ°

#### 1. é—¨æž¶é€”ä¸­æµé‡éªŒè¯ âœ…
- **é€”ä¸­æµé‡å æ¯”**ï¼š84.3%
- **ODç›¸å…³æµé‡å æ¯”**ï¼š28.9%
- **é—¨æž¶åŠŸèƒ½åˆ†ç±»**ï¼š
  - é€šé“åž‹ï¼š163ä¸ªï¼ˆ71.8%ï¼‰
  - æ··åˆåž‹ï¼š46ä¸ªï¼ˆ20.3%ï¼‰
  - èµ·æ­¢åž‹ï¼š18ä¸ªï¼ˆ7.9%ï¼‰

**ç»“è®º**ï¼šéªŒè¯äº†é—¨æž¶ä¸»è¦æ‰¿æ‹…é€šé“åŠŸèƒ½çš„ç†è®ºå‡è®¾ï¼Œé€šé“åž‹é—¨æž¶å ç»å¤§å¤šæ•°ã€‚

#### 2. æ”¶è´¹å¹¿åœºä¸€è‡´æ€§éªŒè¯ âœ…
- **å…¥å£ç›¸å…³ç³»æ•°**ï¼š0.993ï¼ˆé«˜åº¦ä¸€è‡´ï¼‰
- **å‡ºå£ç›¸å…³ç³»æ•°**ï¼š0.990ï¼ˆé«˜åº¦ä¸€è‡´ï¼‰
- **å…¥å£å¹³å‡OD/æµé‡æ¯”**ï¼š0.873ï¼ˆ87.3%ï¼‰
- **å…¥å£ä¸­ä½æ•°OD/æµé‡æ¯”**ï¼š0.924ï¼ˆ92.4%ï¼‰
- **å‡ºå£å¹³å‡OD/æµé‡æ¯”**ï¼š0.817ï¼ˆ81.7%ï¼‰
- **å‡ºå£ä¸­ä½æ•°OD/æµé‡æ¯”**ï¼š0.861ï¼ˆ86.1%ï¼‰

**ç»“è®º**ï¼šéªŒè¯äº†æ”¶è´¹å¹¿åœºæµé‡ä¸ŽODæ•°æ®é«˜åº¦ä¸€è‡´çš„ç†è®ºå‡è®¾ã€‚

#### 3. æ•°æ®è´¨é‡é—®é¢˜ä¿®å¤ ðŸ”§

**é—®é¢˜å‘çŽ°**ï¼š
- åŽŸå§‹æŠ¥å‘Šä¸­æ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžçš„åŸºæœ¬ç»Ÿè®¡æ˜¾ç¤ºä¸­ä½æ•°ä¸º0.000
- ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æžæ˜¾ç¤ºä¸­ä½æ•°ä¸º0.581
- æ•°æ®åº“ç›´æŽ¥æŸ¥è¯¢ç»“æžœä¸Žåˆ†æžç»“æžœä¸ä¸€è‡´

**é—®é¢˜æ ¹å› **ï¼š
1. **æ—¶é—´è¿‡æ»¤é€»è¾‘é”™è¯¯**ï¼šå‡ºå£åˆ†æžåº”åŸºäºŽ `end_time` è€Œéž `start_time`
2. **æ•°æ®è¿žæŽ¥æ–¹å¼é—®é¢˜**ï¼šleft joinå¯¼è‡´å¤§é‡0å€¼å½±å“ç»Ÿè®¡
3. **ç»Ÿè®¡è®¡ç®—åŸºå‡†ä¸ä¸€è‡´**ï¼šéƒ¨åˆ†åŸºäºŽå…¨é‡æ•°æ®ï¼Œéƒ¨åˆ†åŸºäºŽæœ‰æ•ˆæ•°æ®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **åˆ†ç¦»æ•°æ®åŠ è½½**ï¼šå…¥å£å’Œå‡ºå£åˆ†æžä½¿ç”¨ä¸åŒçš„æ—¶é—´è¿‡æ»¤æ¡ä»¶
2. **ç»Ÿä¸€ç»Ÿè®¡åŸºå‡†**ï¼šç»Ÿè®¡æŒ‡æ ‡åªåŸºäºŽæœ‰æ•ˆåŒ¹é…çš„æ•°æ®è®¡ç®—
3. **æ•°æ®è´¨é‡è¯„ä¼°**ï¼šåŒºåˆ†æ€»ODè®°å½•æ•°å’Œæœ‰æ•ˆåŒ¹é…è®°å½•æ•°

#### 4. 86%å·®å¼‚åŽŸå› åˆ†æž ðŸ”

é€šè¿‡ä¿®å¤åŽçš„ä¸­ä½æ•°æ¡ˆä¾‹æ·±åº¦åˆ†æžå‘çŽ°ï¼š

**å…¸åž‹æ¡ˆä¾‹åˆ†æž**ï¼š
- **å…¥å£ä¸­ä½æ•°æ¡ˆä¾‹**ï¼šä¸­ä½æ•°OD/æµé‡æ¯”ä¸º0.924ï¼ˆ92.4%ï¼‰
- **å‡ºå£ä¸­ä½æ•°æ¡ˆä¾‹**ï¼šä¸­ä½æ•°OD/æµé‡æ¯”ä¸º0.861ï¼ˆ86.1%ï¼‰
- **å·®å¼‚èŒƒå›´**ï¼šå…¥å£æ¯”å‡ºå£é«˜çº¦6ä¸ªç™¾åˆ†ç‚¹

**æ ¹æœ¬åŽŸå› **ï¼š
1. **æ—¶é—´çª—å£å·®å¼‚**ï¼šå…¥å£åˆ†æžåŸºäºŽstart_timeï¼Œå‡ºå£åˆ†æžåŸºäºŽend_time
2. **æµé‡æ£€æµ‹å®Œæ•´æ€§**ï¼šå‡ºå£æ£€æµ‹å¯èƒ½å—åˆ°å¤šç§å› ç´ å½±å“
3. **æ•°æ®å¤„ç†ä¸€è‡´æ€§**ï¼šä¸¤ä¸ªæ–¹å‘çš„æ•°æ®å¤„ç†é€»è¾‘ç•¥æœ‰å·®å¼‚
4. **ETCè®¾å¤‡æ€§èƒ½**ï¼šä¸åŒä½ç½®è®¾å¤‡çš„æ•èŽ·çŽ‡å¯èƒ½å­˜åœ¨å·®å¼‚

## ðŸ“ˆ ä¸šåŠ¡ä»·å€¼

### 1. äº¤é€šç®¡ç†ä¼˜åŒ–
- **é—¨æž¶ç®¡ç†ç­–ç•¥**ï¼š
  - é‡ç‚¹ç›‘æŽ§163ä¸ªé€šé“åž‹é—¨æž¶çš„æµé‡å˜åŒ–
  - å¯¹46ä¸ªæ··åˆåž‹é—¨æž¶è¿›è¡Œå·®å¼‚åŒ–ç®¡ç†
  - ç‰¹åˆ«å…³æ³¨18ä¸ªèµ·æ­¢åž‹é—¨æž¶çš„ç‰¹æ®ŠåŠŸèƒ½

- **æ”¶è´¹å¹¿åœºç®¡ç†ç­–ç•¥**ï¼š
  - å…¥å£ï¼šåˆ©ç”¨87-92%çš„ä¸€è‡´æ€§è¿›è¡Œæµé‡é¢„æµ‹
  - å‡ºå£ï¼šåˆ©ç”¨82-86%çš„ä¸€è‡´æ€§è¿›è¡Œå®¹é‡è§„åˆ’
  - å»ºç«‹è¿›å‡ºæµé‡å¹³è¡¡ç›‘æŽ§æœºåˆ¶ï¼ˆåŸºäºŽä¸­ä½æ•°0.930ï¼‰

### 2. æ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»
- **ODæ•°æ®è´¨é‡æŒ‡æ ‡**ï¼š
  - æ”¶è´¹å¹¿åœºå…¥å£OD/æµé‡æ¯”ï¼š85%-95%
  - æ”¶è´¹å¹¿åœºå‡ºå£OD/æµé‡æ¯”ï¼š80%-90%
  - é—¨æž¶ODå æ¯”ï¼š20%-35%

- **å¼‚å¸¸æ£€æµ‹æœºåˆ¶**ï¼š
  - å…¥å£OD/æµé‡æ¯”åç¦»92%è¶…è¿‡15%æ—¶é¢„è­¦
  - å‡ºå£OD/æµé‡æ¯”åç¦»86%è¶…è¿‡15%æ—¶é¢„è­¦
  - é—¨æž¶é€”ä¸­æµé‡å æ¯”ä½ŽäºŽ75%æ—¶æ£€æŸ¥

### 3. é¢„æµ‹æ¨¡åž‹ä¼˜åŒ–
- **å…¥å£æµé‡é¢„æµ‹æ¨¡åž‹**ï¼šä½¿ç”¨0.92è½¬æ¢ç³»æ•°ä»ŽODæ•°æ®é¢„æµ‹æµé‡
- **å‡ºå£æµé‡é¢„æµ‹æ¨¡åž‹**ï¼šä½¿ç”¨0.86è½¬æ¢ç³»æ•°ä»ŽODæ•°æ®é¢„æµ‹æµé‡
- **æ‹¥å µé¢„è­¦æ¨¡åž‹**ï¼šåŸºäºŽOD/æµé‡æ¯”å¼‚å¸¸å˜åŒ–é¢„è­¦
- **å®¹é‡è§„åˆ’æ¨¡åž‹**ï¼šåŸºäºŽé€”ä¸­æµé‡å æ¯”è§„åˆ’é“è·¯å®¹é‡

## ðŸ” æ—¥å¸¸åº”ç”¨æŒ‡å—

### æ¯æ—¥ç›‘æŽ§æŒ‡æ ‡
1. **æ”¶è´¹å¹¿åœºå…¥å£OD/æµé‡æ¯”**ï¼šæ˜¯å¦åœ¨85%-95%èŒƒå›´å†…
2. **æ”¶è´¹å¹¿åœºå‡ºå£OD/æµé‡æ¯”**ï¼šæ˜¯å¦åœ¨80%-90%èŒƒå›´å†…
3. **é—¨æž¶é€”ä¸­æµé‡å æ¯”**ï¼šæ˜¯å¦åœ¨75%-90%èŒƒå›´å†…
4. **å¼‚å¸¸æ”¶è´¹å¹¿åœºæ•°é‡**ï¼šè¿›å‡ºæµé‡ä¸¥é‡ä¸å¹³è¡¡çš„æ•°é‡ï¼ˆå½“å‰çº¦97.6%ï¼‰

### è·¨å¹´ä»½æ•°æ®åˆ†æž
- **2024å¹´æ•°æ®**ï¼šä½¿ç”¨åŽ†å²æ•°æ®è¡¨ï¼Œç³»ç»Ÿè‡ªåŠ¨é€‚é…å­—æ®µç»“æž„
- **2025å¹´æ•°æ®**ï¼šä½¿ç”¨å½“å‰æ•°æ®è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨é¢„è®¡ç®—å­—æ®µ
- **æ··åˆåˆ†æž**ï¼šå¯ä»¥åˆ†åˆ«åˆ†æžä¸åŒå¹´ä»½æ•°æ®ï¼Œå¯¹æ¯”è¶‹åŠ¿å˜åŒ–

### å‘¨æœŸæ€§åˆ†æž
- **æ¯å‘¨**ï¼šåˆ†æžé—¨æž¶åŠŸèƒ½åˆ†ç±»å˜åŒ–è¶‹åŠ¿
- **æ¯æœˆ**ï¼šè¯„ä¼°ODæ•°æ®è´¨é‡æ”¹è¿›æ•ˆæžœ
- **æ¯å­£åº¦**ï¼šæ›´æ–°æµé‡é¢„æµ‹æ¨¡åž‹å‚æ•°
- **æ¯å¹´**ï¼šå¯¹æ¯”å¹´åº¦æ•°æ®å·®å¼‚ï¼Œæ›´æ–°åŸºå‡†å€¼

### å¼‚å¸¸å¤„ç†æµç¨‹
1. **æ•°æ®ä¸€è‡´æ€§å¼‚å¸¸**ï¼š
   - å…¥å£OD/æµé‡æ¯”åç¦»92%è¶…è¿‡15% â†’ æ£€æŸ¥ETCè®¾å¤‡å’Œæ•°æ®ä¼ è¾“
   - å‡ºå£OD/æµé‡æ¯”åç¦»86%è¶…è¿‡15% â†’ åˆ†æžäº¤é€šæ¨¡å¼å˜åŒ–

2. **é—¨æž¶åŠŸèƒ½å¼‚å¸¸**ï¼š
   - é€”ä¸­æµé‡å æ¯”çªç„¶ä¸‹é™åˆ°75%ä»¥ä¸‹ â†’ æ£€æŸ¥æ–°å¢žèµ·æ­¢ç‚¹
   - æ··åˆåž‹é—¨æž¶ODå æ¯”çªå¢žè¶…è¿‡50% â†’ åˆ†æžäº¤é€šæ¨¡å¼å˜åŒ–

3. **æ”¶è´¹å¹¿åœºå¹³è¡¡å¼‚å¸¸**ï¼š
   - è¿›å‡ºæµé‡æ¯”åç¦»0.93è¶…è¿‡30% â†’ è°ƒæŸ¥è®¾å¤‡æ•…éšœ
   - æŒç»­ä¸å¹³è¡¡æ”¶è´¹å¹¿åœºå¢žåŠ  â†’ åˆ†æžæ˜¯å¦æœ‰å•å‘äº¤é€šæ¨¡å¼

## ðŸ“‹ æŠ€æœ¯è§„èŒƒ

### æ•°æ®å¤„ç†æ ‡å‡†
1. **æ—¶é—´çª—å£**ï¼šå»ºè®®ä½¿ç”¨1å°æ—¶ä½œä¸ºæ ‡å‡†åˆ†æžå•ä½
2. **æ ·æœ¬å¤§å°**ï¼šå•å°æ—¶æ•°æ®é‡é€šå¸¸åœ¨10-18ä¸‡æ¡ODè®°å½•
3. **å…³è”é€»è¾‘**ï¼š
   - æ”¶è´¹å¹¿åœºå…¥å£ï¼šOç‚¹åœ¨æ”¶è´¹å¹¿åœºï¼ŒåŸºäºŽstart_timeè¿‡æ»¤
   - æ”¶è´¹å¹¿åœºå‡ºå£ï¼šDç‚¹åœ¨æ”¶è´¹å¹¿åœºï¼ŒåŸºäºŽend_timeè¿‡æ»¤
   - é—¨æž¶åˆ†æžï¼šåŒæ—¶è€ƒè™‘èµ·ç‚¹å’Œç»ˆç‚¹åŠŸèƒ½

### è´¨é‡æŽ§åˆ¶è¦æ±‚
1. **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿ODæ•°æ®å’Œæµé‡æ•°æ®æ—¶é—´èŒƒå›´ä¸€è‡´
2. **å­—æ®µæ ‡å‡†åŒ–**ï¼šç»Ÿä¸€è½¦åž‹åˆ†ç±»æ ‡å‡†ï¼Œæ”¯æŒè·¨å¹´ä»½é€‚é…
3. **å¼‚å¸¸å€¼å¤„ç†**ï¼šè¿‡æ»¤æ˜Žæ˜¾å¼‚å¸¸çš„OD/æµé‡æ¯”ï¼ˆå¦‚>2.0æˆ–<0.1ï¼‰
4. **ç»Ÿè®¡åŸºå‡†ä¸€è‡´**ï¼šæ‰€æœ‰å…³é”®æŒ‡æ ‡åŸºäºŽæœ‰æ•ˆåŒ¹é…æ•°æ®è®¡ç®—

### å¹´ä»½å…¼å®¹æ€§
1. **è‡ªåŠ¨æ£€æµ‹**ï¼šç³»ç»Ÿæ ¹æ®æ—¥æœŸè‡ªåŠ¨é€‰æ‹©å¯¹åº”å¹´ä»½çš„æ•°æ®è¡¨
2. **å­—æ®µæ˜ å°„**ï¼šè‡ªåŠ¨å¤„ç†ä¸åŒå¹´ä»½è¡¨ç»“æž„å·®å¼‚
3. **å‘åŽå…¼å®¹**ï¼šæ”¯æŒ2024å¹´å’Œ2025å¹´æ•°æ®ï¼Œå¯æ‰©å±•å…¶ä»–å¹´ä»½

## ðŸŽ¯ ç»“è®ºä¸Žå»ºè®®

### ä¸»è¦ç»“è®º
1. **é—¨æž¶é€”ä¸­æµé‡ç†è®ºå¾—åˆ°éªŒè¯**ï¼š84.3%çš„é€”ä¸­æµé‡å æ¯”è¯æ˜Žé—¨æž¶ä¸»è¦æ‰¿æ‹…é€šé“åŠŸèƒ½
2. **æ”¶è´¹å¹¿åœºä¸€è‡´æ€§ç†è®ºå¾—åˆ°å¼ºæœ‰åŠ›éªŒè¯**ï¼šå…¥å£0.993ã€å‡ºå£0.990çš„ç›¸å…³ç³»æ•°è¯æ˜Žé«˜åº¦ä¸€è‡´æ€§
3. **å…¥å£å’Œå‡ºå£å·®å¼‚åˆç†**ï¼šå…¥å£92.4%vså‡ºå£86.1%çš„å·®å¼‚æœ‰æ˜Žç¡®çš„ä¸šåŠ¡è§£é‡Š
4. **æ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»å»ºç«‹**ï¼šä¸ºæ—¥å¸¸ç›‘æŽ§å’Œå¼‚å¸¸æ£€æµ‹æä¾›ç§‘å­¦ä¾æ®
5. **è·¨å¹´ä»½åˆ†æžèƒ½åŠ›**ï¼šæ”¯æŒåŽ†å²æ•°æ®å¯¹æ¯”å’Œè¶‹åŠ¿åˆ†æž

### æ”¹è¿›å»ºè®®
1. **æå‡ODæ•°æ®è´¨é‡**ï¼š
   - ä¼˜åŒ–ETCè®¾å¤‡è¯†åˆ«ç®—æ³•
   - æ”¹è¿›æ•°æ®ä¼ è¾“ç¨³å®šæ€§
   - å»ºç«‹æ•°æ®è´¨é‡å®žæ—¶ç›‘æŽ§

2. **å®Œå–„åˆ†æžä½“ç³»**ï¼š
   - æ‰©å±•åˆ°æ›´é•¿æ—¶é—´çª—å£åˆ†æž
   - å¢žåŠ ä¸åŒæ—¶æ®µçš„å¯¹æ¯”åˆ†æž
   - å»ºç«‹åŽ†å²è¶‹åŠ¿åˆ†æž

3. **åº”ç”¨æŽ¨å¹¿**ï¼š
   - å°†åˆ†æžç»“æžœåº”ç”¨äºŽäº¤é€šç®¡ç†å†³ç­–
   - å»ºç«‹å®šæœŸåˆ†æžæŠ¥å‘Šæœºåˆ¶
   - åŸ¹è®­ç›¸å…³äººå‘˜ä½¿ç”¨åˆ†æžå·¥å…·

## ðŸ“š é™„å½•

### A. å·¥å…·ä½¿ç”¨æŒ‡å—

#### è„šæœ¬è¿è¡Œå‘½ä»¤
```bash
# 2025å¹´æ•°æ®åˆ†æž
python run_detailed_correlation.py --start-date "2025-07-07 08:00:00" --end-date "2025-07-07 09:00:00"

# 2024å¹´æ•°æ®åˆ†æžï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
python run_detailed_correlation.py --start-date "2024-07-08 08:00:00" --end-date "2024-07-08 09:00:00"

# æŒ‡å®šè¾“å‡ºç›®å½•
python run_detailed_correlation.py --start-date "2025-07-07 08:00:00" --end-date "2025-07-07 09:00:00" --output-dir custom_output
```

#### çŽ¯å¢ƒå˜é‡è®¾ç½®
```bash
# Windows PowerShellï¼ˆè¯·ä¿®æ”¹ä¸ºå®žé™…çš„æ•°æ®åº“ä¿¡æ¯ï¼‰
$env:DB_HOST="your_db_host"
$env:DB_PORT="your_db_port"
$env:DB_NAME="your_db_name"
$env:DB_USER="your_username"
$env:DB_PASSWORD="your_password"

# Linux/Macï¼ˆè¯·ä¿®æ”¹ä¸ºå®žé™…çš„æ•°æ®åº“ä¿¡æ¯ï¼‰
export DB_HOST="your_db_host"
export DB_PORT="your_db_port"
export DB_NAME="your_db_name"
export DB_USER="your_username"
export DB_PASSWORD="your_password"
```

### B. è¾“å‡ºæ–‡ä»¶è¯´æ˜Ž

#### ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨
1. **detailed_correlation_report.html**ï¼šå®Œæ•´çš„åˆ†æžæŠ¥å‘Šï¼ˆå¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼‰
2. **detailed_gantry_origin_correlation.json**ï¼šé—¨æž¶èµ·ç‚¹åˆ†æžè¯¦ç»†æ•°æ®
3. **gantry_destination_analysis.json**ï¼šé—¨æž¶ç»ˆç‚¹åˆ†æžè¯¦ç»†æ•°æ®
4. **gantry_transit_analysis.json**ï¼šé—¨æž¶é€”ä¸­æµé‡åˆ†æžè¯¦ç»†æ•°æ®
5. **detailed_toll_square_correlation.json**ï¼šæ”¶è´¹å¹¿åœºå…¥å£åˆ†æžè¯¦ç»†æ•°æ®
6. **detailed_toll_square_exit_correlation.json**ï¼šæ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžè¯¦ç»†æ•°æ®
7. **toll_square_balance_analysis.json**ï¼šæ”¶è´¹å¹¿åœºæµé‡å¹³è¡¡åˆ†æžè¯¦ç»†æ•°æ®
8. **toll_square_median_entry_analysis.json**ï¼šæ”¶è´¹å¹¿åœºå…¥å£ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æž
9. **toll_square_median_exit_analysis.json**ï¼šæ”¶è´¹å¹¿åœºå‡ºå£ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æž

#### å…³é”®æŒ‡æ ‡è§£é‡Š
- **correlation_coefficient**ï¼šç›¸å…³ç³»æ•°ï¼ŒèŒƒå›´[-1,1]ï¼Œè¶ŠæŽ¥è¿‘1è¡¨ç¤ºæ­£ç›¸å…³æ€§è¶Šå¼º
- **od_flow_ratio**ï¼šODæ•°é‡ä¸Žæµé‡æ€»æ•°çš„æ¯”å€¼
- **transit_ratio**ï¼šé€”ä¸­æµé‡å æ€»æµé‡çš„æ¯”ä¾‹
- **balance_ratio_stats.median**ï¼šè¿›å‡ºæµé‡æ¯”çš„ä¸­ä½æ•°ï¼ˆæ›¿ä»£å¹³å‡å€¼ï¼‰

### C. æ•…éšœæŽ’é™¤

#### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

1. **æ•°æ®åº“è¿žæŽ¥å¤±è´¥**
   ```
   é”™è¯¯ï¼špsycopg2.OperationalError: could not connect to server
   è§£å†³ï¼šæ£€æŸ¥çŽ¯å¢ƒå˜é‡è®¾ç½®ï¼Œç¡®è®¤æ•°æ®åº“æœåŠ¡çŠ¶æ€
   ```

2. **å¹´ä»½è¡¨ä¸å­˜åœ¨**
   ```
   é”™è¯¯ï¼šrelation "dwd.dwd_od_g4202" does not exist
   è§£å†³ï¼šç¡®è®¤æ•°æ®åº“ä¸­å­˜åœ¨å¯¹åº”å¹´ä»½çš„æ•°æ®è¡¨
   ```

3. **å­—æ®µä¸å­˜åœ¨é”™è¯¯**
   ```
   é”™è¯¯ï¼šcolumn "gantry_id" does not exist
   è§£å†³ï¼šæ£€æŸ¥æ•°æ®è¡¨ç»“æž„ï¼Œç¡®è®¤å­—æ®µæ˜ å°„é…ç½®
   ```

4. **å…³è”æ•°æ®ä¸ºç©º**
   ```
   è­¦å‘Šï¼šæ”¶è´¹å¹¿åœºå‡ºå£å…³è”æ•°æ®ä¸ºç©º
   è§£å†³ï¼šæ£€æŸ¥æ—¶é—´èŒƒå›´è®¾ç½®ï¼Œç¡®è®¤è¯¥æ—¶æ®µæœ‰æ•°æ®
   ```

### D. ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

#### v2.0 (2025-07-21)
- ðŸ†• æ”¯æŒ2024å¹´å’Œ2025å¹´æ•°æ®è‡ªåŠ¨åˆ‡æ¢
- ðŸ”§ ä¿®å¤æ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžæ•°æ®ä¸ä¸€è‡´é—®é¢˜
- ðŸ”§ ä¿®å¤æ—¶é—´è¿‡æ»¤é€»è¾‘é”™è¯¯
- ðŸ—‘ï¸ ç§»é™¤æ— æ„ä¹‰çš„å¹³å‡è¿›å‡ºæµé‡æ¯”è®¡ç®—
- ðŸ“Š ä¼˜åŒ–ç»Ÿè®¡æŒ‡æ ‡è®¡ç®—åŸºå‡†
- ðŸ”’ éšè—æ•æ„Ÿæ•°æ®åº“ä¿¡æ¯

#### v1.0 (2025-07-18)
- ðŸŽ‰ é¦–æ¬¡å‘å¸ƒå®Œæ•´åˆ†æžåŠŸèƒ½
- ðŸ“Š å®žçŽ°é—¨æž¶å’Œæ”¶è´¹å¹¿åœºå…³è”åˆ†æž
- ðŸ“ˆ å»ºç«‹æ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»

### E. æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨æ—¶é—´åˆ†åŒºç´¢å¼•
   - é™åˆ¶æŸ¥è¯¢å­—æ®µæ•°é‡
   - åˆç†è®¾ç½®æ—¶é—´èŒƒå›´

2. **å†…å­˜ä½¿ç”¨ä¼˜åŒ–**ï¼š
   - åˆ†æ‰¹å¤„ç†å¤§æ•°æ®é›†
   - åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„DataFrame
   - ä½¿ç”¨æ•°æ®ç±»åž‹ä¼˜åŒ–

3. **è·¨å¹´ä»½åˆ†æžä¼˜åŒ–**ï¼š
   - ç¼“å­˜å¹´ä»½æ£€æµ‹ç»“æžœ
   - é¢„ç¼–è¯‘SQLæ¨¡æ¿
   - å¤ç”¨æ•°æ®åº“è¿žæŽ¥

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š2025-07-21
**åˆ†æžå·¥å…·ç‰ˆæœ¬**ï¼šdetailed_correlation_analysis.py v2.0
**æ”¯æŒæ•°æ®æº**ï¼š
- 2025å¹´ï¼šdwd.dwd_od_weekly, dwd.dwd_flow_gantry_weekly, dwd.dwd_flow_onramp_weekly, dwd.dwd_flow_offramp_weekly
- 2024å¹´ï¼šdwd.dwd_od_g4202, dwd.dwd_flow_gantry, dwd.dwd_flow_onramp, dwd.dwd_flow_offramp
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0
