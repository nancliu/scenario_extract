# é«˜é€Ÿå…¬è·¯ODä¸Žæµé‡å…³è”åˆ†æžæ€»ç»“æŠ¥å‘Š

## ðŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
æœ¬é¡¹ç›®æ—¨åœ¨æ·±å…¥åˆ†æžé«˜é€Ÿå…¬è·¯ODï¼ˆOrigin-Destinationï¼‰æ•°æ®ä¸Žæµé‡æ•°æ®ä¹‹é—´çš„å…³è”æ€§ï¼Œé‡ç‚¹è§£å†³é—¨æž¶é€”ä¸­æµé‡å’Œæ”¶è´¹å¹¿åœºè¿›å‡ºæµé‡çš„å‡†ç¡®å¯¹æ¯”åˆ†æžé—®é¢˜ã€‚

### åˆ†æžç›®æ ‡
1. éªŒè¯é—¨æž¶ä¸»è¦æ‰¿æ‹…é€šé“åŠŸèƒ½çš„ç†è®ºå‡è®¾
2. éªŒè¯æ”¶è´¹å¹¿åœºæµé‡ä¸ŽODæ•°æ®é«˜åº¦ä¸€è‡´çš„ç†è®ºå‡è®¾
3. åˆ†æžOD/æµé‡æ¯”ä¸­ä½æ•°çº¦50%çš„å·®å¼‚åŽŸå› 
4. å»ºç«‹ç§‘å­¦çš„äº¤é€šæ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
1. **é—¨æž¶å…³è”åˆ†æž**
   - é—¨æž¶èµ·ç‚¹åˆ†æžï¼šç»Ÿè®¡ä»¥é—¨æž¶ä¸ºèµ·ç‚¹çš„ODæ•°æ®ä¸Žé—¨æž¶æµé‡çš„å…³è”
   - é—¨æž¶ç»ˆç‚¹åˆ†æžï¼šç»Ÿè®¡ä»¥é—¨æž¶ä¸ºç»ˆç‚¹çš„ODæ•°æ®ä¸Žé—¨æž¶æµé‡çš„å…³è”
   - é—¨æž¶é€”ä¸­æµé‡åˆ†æžï¼šè®¡ç®—é—¨æž¶çš„é€”ä¸­æµé‡å æ¯”å’ŒåŠŸèƒ½åˆ†ç±»

2. **æ”¶è´¹å¹¿åœºå…³è”åˆ†æž**
   - æ”¶è´¹å¹¿åœºå…¥å£åˆ†æžï¼šç»Ÿè®¡ä»¥æ”¶è´¹å¹¿åœºä¸ºèµ·ç‚¹çš„ODæ•°æ®ä¸Žå…¥å£æµé‡çš„å…³è”
   - æ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžï¼šç»Ÿè®¡ä»¥æ”¶è´¹å¹¿åœºä¸ºç»ˆç‚¹çš„ODæ•°æ®ä¸Žå‡ºå£æµé‡çš„å…³è”
   - æ”¶è´¹å¹¿åœºæµé‡å¹³è¡¡åˆ†æžï¼šåˆ†æžè¿›å‡ºæµé‡çš„å¹³è¡¡æƒ…å†µ

3. **æ·±åº¦æ¡ˆä¾‹åˆ†æž**
   - ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æžï¼šæ·±å…¥åˆ†æžOD/æµé‡æ¯”ä¸­ä½æ•°é™„è¿‘çš„å…·ä½“æ¡ˆä¾‹
   - è½¦åž‹ç»“æž„å¯¹æ¯”ï¼šå¯¹æ¯”ODæ•°æ®ä¸Žæµé‡æ•°æ®çš„è½¦åž‹åˆ†å¸ƒå·®å¼‚
   - å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼šè¯†åˆ«æµé‡å¹³è¡¡å¼‚å¸¸çš„æ”¶è´¹å¹¿åœº

### å…³é”®ç®—æ³•
```python
# é—¨æž¶é€”ä¸­æµé‡è®¡ç®—
é€”ä¸­æµé‡ = é—¨æž¶æ€»æµé‡ - (é—¨æž¶ä¸ºOç‚¹çš„ODé‡ + é—¨æž¶ä¸ºDç‚¹çš„ODé‡)
é€”ä¸­æµé‡å æ¯” = é€”ä¸­æµé‡ / é—¨æž¶æ€»æµé‡

# æ”¶è´¹å¹¿åœºä¸€è‡´æ€§è¯„ä¼°
å…¥å£ä¸€è‡´æ€§æ¯”å€¼ = æ”¶è´¹å¹¿åœºå…¥å£æµé‡ / æ”¶è´¹å¹¿åœºä¸ºOç‚¹çš„ODé‡
å‡ºå£ä¸€è‡´æ€§æ¯”å€¼ = æ”¶è´¹å¹¿åœºå‡ºå£æµé‡ / æ”¶è´¹å¹¿åœºä¸ºDç‚¹çš„ODé‡

# é—¨æž¶åŠŸèƒ½åˆ†ç±»
if ODå æ¯” > 0.5: åŠŸèƒ½ç±»åž‹ = "èµ·æ­¢åž‹"
elif é€”ä¸­æµé‡å æ¯” > 0.8: åŠŸèƒ½ç±»åž‹ = "é€šé“åž‹"  
else: åŠŸèƒ½ç±»åž‹ = "æ··åˆåž‹"
```

## ðŸ“Š åˆ†æžç»“æžœ

### æ•°æ®è§„æ¨¡ï¼ˆ1å°æ—¶æ ·æœ¬ï¼š2025-07-07 08:00-09:00ï¼‰
- **ODæ•°æ®**ï¼š48,395æ¡è®°å½•
- **é—¨æž¶æµé‡æ•°æ®**ï¼š2,690æ¡è®°å½•
- **æ”¶è´¹å¹¿åœºå…¥å£æµé‡**ï¼š1,632æ¡è®°å½•
- **æ”¶è´¹å¹¿åœºå‡ºå£æµé‡**ï¼š1,614æ¡è®°å½•

### æ ¸å¿ƒå‘çŽ°

#### 1. é—¨æž¶é€”ä¸­æµé‡éªŒè¯ âœ…
- **é€”ä¸­æµé‡å æ¯”**ï¼š93.7%
- **ODç›¸å…³æµé‡å æ¯”**ï¼š6.3%
- **é—¨æž¶åŠŸèƒ½åˆ†ç±»**ï¼š
  - é€šé“åž‹ï¼š201ä¸ªï¼ˆ88.5%ï¼‰
  - æ··åˆåž‹ï¼š24ä¸ªï¼ˆ10.6%ï¼‰
  - èµ·æ­¢åž‹ï¼š2ä¸ªï¼ˆ0.9%ï¼‰

**ç»“è®º**ï¼šå¼ºæœ‰åŠ›åœ°éªŒè¯äº†é—¨æž¶ä¸»è¦æ‰¿æ‹…é€šé“åŠŸèƒ½çš„ç†è®ºå‡è®¾ã€‚

#### 2. æ”¶è´¹å¹¿åœºä¸€è‡´æ€§éªŒè¯ âœ…
- **å…¥å£ç›¸å…³ç³»æ•°**ï¼š0.953ï¼ˆé«˜åº¦ä¸€è‡´ï¼‰
- **å‡ºå£ç›¸å…³ç³»æ•°**ï¼šç±»ä¼¼çš„é«˜ä¸€è‡´æ€§
- **ä¸­ä½æ•°OD/æµé‡æ¯”**ï¼š0.495ï¼ˆçº¦50%ï¼‰
- **å¹³å‡OD/æµé‡æ¯”**ï¼š0.476ï¼ˆ47.6%ï¼‰

**ç»“è®º**ï¼šéªŒè¯äº†æ”¶è´¹å¹¿åœºæµé‡ä¸ŽODæ•°æ®é«˜åº¦ä¸€è‡´çš„ç†è®ºå‡è®¾ã€‚

#### 3. 50%å·®å¼‚åŽŸå› åˆ†æž ðŸ”

é€šè¿‡ä¸­ä½æ•°æ¡ˆä¾‹æ·±åº¦åˆ†æžå‘çŽ°ï¼š

**å…¸åž‹æ¡ˆä¾‹1ï¼šG00055100300604010**
- ODæ•°é‡ï¼š19ï¼Œæµé‡æ€»æ•°ï¼š38ï¼Œæ¯”ä¾‹ï¼š50.0%
- ODè½¦åž‹ï¼šk1(17), h3(1), h1(1)
- æµé‡è½¦åž‹ï¼štotal_k(30), total_h(8)
- **å·®å¼‚**ï¼šæµé‡ä¸­å®¢è½¦æ•°é‡æ¯”ODä¸­å¤š76%

**æ ¹æœ¬åŽŸå› **ï¼š
1. **ODæ•°æ®é‡‡æ ·ä¸å®Œæ•´**ï¼šçº¦50%çš„æ•èŽ·çŽ‡
2. **æµé‡ç»Ÿè®¡æ›´å…¨é¢**ï¼šç‰©ç†æ£€æµ‹è®¾å¤‡æ•èŽ·çŽ‡æ›´é«˜
3. **è½¦åž‹åˆ†ç±»ä¸€è‡´æ€§**ï¼šç»“æž„æ¯”ä¾‹åŸºæœ¬ä¸€è‡´ï¼Œå·®å¼‚åœ¨æ•°é‡å±‚é¢

## ðŸ“ˆ ä¸šåŠ¡ä»·å€¼

### 1. äº¤é€šç®¡ç†ä¼˜åŒ–
- **é—¨æž¶ç®¡ç†ç­–ç•¥**ï¼š
  - é‡ç‚¹ç›‘æŽ§201ä¸ªé€šé“åž‹é—¨æž¶çš„æµé‡å˜åŒ–
  - å¯¹24ä¸ªæ··åˆåž‹é—¨æž¶è¿›è¡Œå·®å¼‚åŒ–ç®¡ç†
  - ç‰¹åˆ«å…³æ³¨2ä¸ªèµ·æ­¢åž‹é—¨æž¶çš„ç‰¹æ®ŠåŠŸèƒ½

- **æ”¶è´¹å¹¿åœºç®¡ç†ç­–ç•¥**ï¼š
  - åˆ©ç”¨50%çš„ç¨³å®šæ¯”ä¾‹è¿›è¡Œæµé‡é¢„æµ‹
  - é‡ç‚¹å…³æ³¨248ä¸ªæµé‡ä¸å¹³è¡¡çš„æ”¶è´¹å¹¿åœº
  - å»ºç«‹è¿›å‡ºæµé‡å¹³è¡¡ç›‘æŽ§æœºåˆ¶

### 2. æ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»
- **ODæ•°æ®è´¨é‡æŒ‡æ ‡**ï¼š
  - ç›®æ ‡æ•èŽ·çŽ‡ï¼š70%ä»¥ä¸Š
  - æ”¶è´¹å¹¿åœºOD/æµé‡æ¯”ï¼š45%-55%
  - é—¨æž¶ODå æ¯”ï¼š5%-10%

- **å¼‚å¸¸æ£€æµ‹æœºåˆ¶**ï¼š
  - OD/æµé‡æ¯”åç¦»50%è¶…è¿‡20%æ—¶é¢„è­¦
  - é—¨æž¶é€”ä¸­æµé‡å æ¯”ä½ŽäºŽ80%æ—¶æ£€æŸ¥
  - æ”¶è´¹å¹¿åœºè¿›å‡ºæµé‡æ¯”å¼‚å¸¸æ—¶è°ƒæŸ¥

### 3. é¢„æµ‹æ¨¡åž‹ä¼˜åŒ–
- **æµé‡é¢„æµ‹æ¨¡åž‹**ï¼šä½¿ç”¨0.476è½¬æ¢ç³»æ•°ä»ŽODæ•°æ®é¢„æµ‹æµé‡
- **æ‹¥å µé¢„è­¦æ¨¡åž‹**ï¼šåŸºäºŽOD/æµé‡æ¯”å¼‚å¸¸å˜åŒ–é¢„è­¦
- **å®¹é‡è§„åˆ’æ¨¡åž‹**ï¼šåŸºäºŽé€”ä¸­æµé‡å æ¯”è§„åˆ’é“è·¯å®¹é‡

## ðŸ” æ—¥å¸¸åº”ç”¨æŒ‡å—

### æ¯æ—¥ç›‘æŽ§æŒ‡æ ‡
1. **æ”¶è´¹å¹¿åœºOD/æµé‡æ¯”**ï¼šæ˜¯å¦åœ¨45%-55%èŒƒå›´å†…
2. **é—¨æž¶é€”ä¸­æµé‡å æ¯”**ï¼šæ˜¯å¦åœ¨90%-95%èŒƒå›´å†…
3. **å¼‚å¸¸æ”¶è´¹å¹¿åœºæ•°é‡**ï¼šè¿›å‡ºæµé‡ä¸¥é‡ä¸å¹³è¡¡çš„æ•°é‡

### å‘¨æœŸæ€§åˆ†æž
- **æ¯å‘¨**ï¼šåˆ†æžé—¨æž¶åŠŸèƒ½åˆ†ç±»å˜åŒ–è¶‹åŠ¿
- **æ¯æœˆ**ï¼šè¯„ä¼°ODæ•°æ®è´¨é‡æ”¹è¿›æ•ˆæžœ
- **æ¯å­£åº¦**ï¼šæ›´æ–°æµé‡é¢„æµ‹æ¨¡åž‹å‚æ•°

### å¼‚å¸¸å¤„ç†æµç¨‹
1. **OD/æµé‡æ¯”å¼‚å¸¸**ï¼š
   - åç¦»50%è¶…è¿‡20% â†’ æ·±å…¥è°ƒæŸ¥æ•°æ®æº
   - æ£€æŸ¥ETCè®¾å¤‡çŠ¶æ€å’Œæ•°æ®ä¼ è¾“
   - åˆ†æžæ˜¯å¦æœ‰ç‰¹æ®Šäº¤é€šäº‹ä»¶

2. **é—¨æž¶åŠŸèƒ½å¼‚å¸¸**ï¼š
   - é€”ä¸­æµé‡å æ¯”çªç„¶ä¸‹é™ â†’ æ£€æŸ¥æ–°å¢žèµ·æ­¢ç‚¹
   - æ··åˆåž‹é—¨æž¶ODå æ¯”çªå¢ž â†’ åˆ†æžäº¤é€šæ¨¡å¼å˜åŒ–

3. **æ”¶è´¹å¹¿åœºå¹³è¡¡å¼‚å¸¸**ï¼š
   - è¿›å‡ºæµé‡æ¯”åç¦»1.0è¶…è¿‡30% â†’ è°ƒæŸ¥è®¾å¤‡æ•…éšœ
   - æŒç»­ä¸å¹³è¡¡ â†’ åˆ†æžæ˜¯å¦æœ‰å•å‘äº¤é€šæ¨¡å¼

## ðŸ“‹ æŠ€æœ¯è§„èŒƒ

### æ•°æ®å¤„ç†æ ‡å‡†
1. **æ—¶é—´çª—å£**ï¼šå»ºè®®ä½¿ç”¨1å°æ—¶ä½œä¸ºæ ‡å‡†åˆ†æžå•ä½
2. **æ ·æœ¬å¤§å°**ï¼šå•å°æ—¶æ•°æ®é‡é€šå¸¸åœ¨4-5ä¸‡æ¡ODè®°å½•
3. **å…³è”é€»è¾‘**ï¼š
   - æ”¶è´¹å¹¿åœºå…¥å£ï¼šOç‚¹åœ¨æ”¶è´¹å¹¿åœºï¼ŒDç‚¹ä¸å—é™åˆ¶
   - æ”¶è´¹å¹¿åœºå‡ºå£ï¼šDç‚¹åœ¨æ”¶è´¹å¹¿åœºï¼ŒOç‚¹ä¸å—é™åˆ¶
   - é—¨æž¶åˆ†æžï¼šåŒæ—¶è€ƒè™‘èµ·ç‚¹å’Œç»ˆç‚¹åŠŸèƒ½

### è´¨é‡æŽ§åˆ¶è¦æ±‚
1. **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿ODæ•°æ®å’Œæµé‡æ•°æ®æ—¶é—´èŒƒå›´ä¸€è‡´
2. **å­—æ®µæ ‡å‡†åŒ–**ï¼šç»Ÿä¸€è½¦åž‹åˆ†ç±»æ ‡å‡†
3. **å¼‚å¸¸å€¼å¤„ç†**ï¼šè¿‡æ»¤æ˜Žæ˜¾å¼‚å¸¸çš„OD/æµé‡æ¯”ï¼ˆå¦‚>2.0æˆ–<0.1ï¼‰

## ðŸŽ¯ ç»“è®ºä¸Žå»ºè®®

### ä¸»è¦ç»“è®º
1. **é—¨æž¶é€”ä¸­æµé‡ç†è®ºå¾—åˆ°å¼ºæœ‰åŠ›éªŒè¯**ï¼š93.7%çš„é€”ä¸­æµé‡å æ¯”è¯æ˜Žé—¨æž¶ä¸»è¦æ‰¿æ‹…é€šé“åŠŸèƒ½
2. **æ”¶è´¹å¹¿åœºä¸€è‡´æ€§ç†è®ºå¾—åˆ°éªŒè¯**ï¼š0.953çš„ç›¸å…³ç³»æ•°è¯æ˜Žé«˜åº¦ä¸€è‡´æ€§
3. **50%å·®å¼‚æœ‰åˆç†è§£é‡Š**ï¼šä¸»è¦ç”±ODæ•°æ®é‡‡æ ·ä¸å®Œæ•´å¯¼è‡´ï¼Œå±žäºŽæ­£å¸¸çŽ°è±¡
4. **æ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»å»ºç«‹**ï¼šä¸ºæ—¥å¸¸ç›‘æŽ§å’Œå¼‚å¸¸æ£€æµ‹æä¾›ç§‘å­¦ä¾æ®

### æ”¹è¿›å»ºè®®
1. **æå‡ODæ•°æ®è´¨é‡**ï¼š
   - ä¼˜åŒ–ETCè®¾å¤‡è¯†åˆ«ç®—æ³•
   - æ”¹è¿›æ•°æ®ä¼ è¾“ç¨³å®šæ€§
   - å»ºç«‹æ•°æ®è´¨é‡å®žæ—¶ç›‘æŽ§

2. **å®Œå–„åˆ†æžä½“ç³»**ï¼š
   - æ‰©å±•åˆ°æ›´é•¿æ—¶é—´çª—å£åˆ†æž
   - å¢žåŠ ä¸åŒæ—¶æ®µçš„å¯¹æ¯”åˆ†æž
   - å»ºç«‹åŽ†å²è¶‹åŠ¿åˆ†æž

3. **åº”ç”¨æŽ¨å¹¿**ï¼š
   - å°†åˆ†æžç»“æžœåº”ç”¨äºŽäº¤é€šç®¡ç†å†³ç­–
   - å»ºç«‹å®šæœŸåˆ†æžæŠ¥å‘Šæœºåˆ¶
   - åŸ¹è®­ç›¸å…³äººå‘˜ä½¿ç”¨åˆ†æžå·¥å…·

## ðŸ“š é™„å½•

### A. å·¥å…·ä½¿ç”¨æŒ‡å—

#### è„šæœ¬è¿è¡Œå‘½ä»¤
```bash
# åŸºæœ¬ç”¨æ³•ï¼ˆåˆ†æž1å°æ—¶æ•°æ®ï¼‰
python detailed_correlation_analysis.py --start-date "2025-07-07 08:00:00" --end-date "2025-07-07 09:00:00"

# æŒ‡å®šè¾“å‡ºç›®å½•
python detailed_correlation_analysis.py --start-date "2025-07-07 08:00:00" --end-date "2025-07-07 09:00:00" --output-dir custom_output

# ä½¿ç”¨æ ·æœ¬é™åˆ¶ï¼ˆå¯é€‰ï¼‰
python detailed_correlation_analysis.py --start-date "2025-07-07 08:00:00" --end-date "2025-07-07 09:00:00" --sample-size 10000
```

#### çŽ¯å¢ƒå˜é‡è®¾ç½®
```bash
# Windows PowerShell
$env:DB_HOST="10.149.235.123"
$env:DB_PORT="5432"
$env:DB_NAME="sdzg"
$env:DB_USER="ln"
$env:DB_PASSWORD="caneln"

# Linux/Mac
export DB_HOST="10.149.235.123"
export DB_PORT="5432"
export DB_NAME="sdzg"
export DB_USER="ln"
export DB_PASSWORD="caneln"
```

### B. è¾“å‡ºæ–‡ä»¶è¯´æ˜Ž

#### ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨
1. **detailed_correlation_report.html**ï¼šå®Œæ•´çš„åˆ†æžæŠ¥å‘Šï¼ˆå¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼‰
2. **gantry_origin_analysis.json**ï¼šé—¨æž¶èµ·ç‚¹åˆ†æžè¯¦ç»†æ•°æ®
3. **gantry_destination_analysis.json**ï¼šé—¨æž¶ç»ˆç‚¹åˆ†æžè¯¦ç»†æ•°æ®
4. **gantry_transit_analysis.json**ï¼šé—¨æž¶é€”ä¸­æµé‡åˆ†æžè¯¦ç»†æ•°æ®
5. **toll_square_entry_analysis.json**ï¼šæ”¶è´¹å¹¿åœºå…¥å£åˆ†æžè¯¦ç»†æ•°æ®
6. **toll_square_exit_analysis.json**ï¼šæ”¶è´¹å¹¿åœºå‡ºå£åˆ†æžè¯¦ç»†æ•°æ®
7. **toll_square_balance_analysis.json**ï¼šæ”¶è´¹å¹¿åœºæµé‡å¹³è¡¡åˆ†æžè¯¦ç»†æ•°æ®
8. **toll_square_median_entry_analysis.json**ï¼šæ”¶è´¹å¹¿åœºå…¥å£ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æž
9. **toll_square_median_exit_analysis.json**ï¼šæ”¶è´¹å¹¿åœºå‡ºå£ä¸­ä½æ•°æ¡ˆä¾‹åˆ†æž

#### å…³é”®æŒ‡æ ‡è§£é‡Š
- **correlation_coefficient**ï¼šç›¸å…³ç³»æ•°ï¼ŒèŒƒå›´[-1,1]ï¼Œè¶ŠæŽ¥è¿‘1è¡¨ç¤ºæ­£ç›¸å…³æ€§è¶Šå¼º
- **od_flow_ratio**ï¼šODæ•°é‡ä¸Žæµé‡æ€»æ•°çš„æ¯”å€¼
- **transit_ratio**ï¼šé€”ä¸­æµé‡å æ€»æµé‡çš„æ¯”ä¾‹
- **balance_ratio**ï¼šå‡ºå£æµé‡ä¸Žå…¥å£æµé‡çš„æ¯”å€¼

### C. æ•…éšœæŽ’é™¤

#### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

1. **æ•°æ®åº“è¿žæŽ¥å¤±è´¥**
   ```
   é”™è¯¯ï¼špsycopg2.OperationalError: could not connect to server
   è§£å†³ï¼šæ£€æŸ¥çŽ¯å¢ƒå˜é‡è®¾ç½®ï¼Œç¡®è®¤æ•°æ®åº“æœåŠ¡çŠ¶æ€
   ```

2. **å†…å­˜ä¸è¶³**
   ```
   é”™è¯¯ï¼šMemoryError
   è§£å†³ï¼šå‡å°‘æ—¶é—´èŒƒå›´æˆ–ä½¿ç”¨--sample-sizeå‚æ•°é™åˆ¶æ•°æ®é‡
   ```

3. **å­—æ®µä¸å­˜åœ¨é”™è¯¯**
   ```
   é”™è¯¯ï¼šKeyError: 'truck_ratio'
   è§£å†³ï¼šæ£€æŸ¥æ•°æ®è¡¨ç»“æž„ï¼Œç¡®è®¤è½¦åž‹å­—æ®µæ˜¯å¦å­˜åœ¨
   ```

4. **å…³è”æ•°æ®ä¸ºç©º**
   ```
   è­¦å‘Šï¼šé—¨æž¶å…³è”æ•°æ®ä¸ºç©º
   è§£å†³ï¼šæ£€æŸ¥æ—¶é—´èŒƒå›´è®¾ç½®ï¼Œç¡®è®¤è¯¥æ—¶æ®µæœ‰æ•°æ®
   ```

### D. æ‰©å±•å¼€å‘æŒ‡å—

#### æ·»åŠ æ–°çš„åˆ†æžç»´åº¦
1. åœ¨`DetailedCorrelationAnalyzer`ç±»ä¸­æ·»åŠ æ–°æ–¹æ³•
2. åœ¨`main`å‡½æ•°ä¸­è°ƒç”¨æ–°æ–¹æ³•
3. åœ¨æŠ¥å‘Šç”Ÿæˆä¸­æ·»åŠ æ–°çš„HTMLéƒ¨åˆ†
4. åœ¨æ•°æ®å¯¼å‡ºä¸­æ·»åŠ æ–°çš„JSONæ–‡ä»¶

#### è‡ªå®šä¹‰åˆ†æžé€»è¾‘
```python
def analyze_custom_dimension(self):
    """è‡ªå®šä¹‰åˆ†æžæ–¹æ³•ç¤ºä¾‹"""
    # 1. æ•°æ®ç­›é€‰
    custom_data = self.od_data[æ¡ä»¶].copy()

    # 2. æ•°æ®èšåˆ
    aggregated = custom_data.groupby(['å­—æ®µ1', 'å­—æ®µ2']).agg({
        'ç›®æ ‡å­—æ®µ': ['count', 'sum', 'mean']
    }).reset_index()

    # 3. ç»Ÿè®¡è®¡ç®—
    results = {
        'total_records': len(aggregated),
        'custom_metric': aggregated['ç›®æ ‡å­—æ®µ'].mean()
    }

    return results
```

### E. æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨æ—¶é—´åˆ†åŒºç´¢å¼•
   - é™åˆ¶æŸ¥è¯¢å­—æ®µæ•°é‡
   - åˆç†è®¾ç½®LIMIT

2. **å†…å­˜ä½¿ç”¨ä¼˜åŒ–**ï¼š
   - åˆ†æ‰¹å¤„ç†å¤§æ•°æ®é›†
   - åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„DataFrame
   - ä½¿ç”¨æ•°æ®ç±»åž‹ä¼˜åŒ–

3. **è®¡ç®—æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨å‘é‡åŒ–æ“ä½œ
   - é¿å…å¾ªçŽ¯éåŽ†DataFrame
   - åˆç†ä½¿ç”¨å¹¶è¡Œè®¡ç®—

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š2025-07-18
**åˆ†æžå·¥å…·ç‰ˆæœ¬**ï¼šdetailed_correlation_analysis.py v2.0
**æ•°æ®æ¥æº**ï¼šdwd.dwd_od_weekly, dwd.dwd_flow_gantry_weekly, dwd.dwd_flow_onramp_weekly, dwd.dwd_flow_offramp_weekly
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
